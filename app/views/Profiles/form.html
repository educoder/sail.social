#{form @save()}
 
#{ifErrors}
 
   <h1>Oops</h1>
 
   #{errors}
       <li>${error}</li>
   #{/errors}
 
#{/ifErrors}
     
	<p>
		<label>&{'profileimage'}:</label>
		#{if profile.picture}
        
		<img src="@{Profiles.getPicture(profile.id)}" />
        #{/if}
       

<a id="uploadProfile" href="#">upload a new picture</a>
<script type="text/javascript" charset="UTF-8">
   $('#uploadProfile').click(function() {
       $.post('@{Profiles.uploadPicture()}', function(profile) {
			$('img').replaceWith('<img src="@{Profiles.getPicture(profile.id)}" />')
		})
	})
</script>	
			    #{form @Profiles.uploadPicture(), enctype:'multipart/form-data'}

				    <input type="file" name="profile.picture" />
				
				
				    <input type="submit" name="submit" value="Save" />
				#{/form}
    </p>



    <p>
        #{field 'firstname'}
        <label>&{'firstname'}:</label>
        <input type="text" name="${field.name}" 
            value="${profile?.firstname}" class="${field.errorClass}" />
        #{/field}
    </p>
 
   <p>
        #{field 'lastname'}
        <label>&{'lastname'}:</label>
        <input type="text" name="${field.name}" 
            value="${profile?.lastname}" class="${field.errorClass}" />
            
        #{/field}
    </p>
    
     <p>
        #{field 'email'}
        <label>&{'emailaddress'}:</label>
        <input type="text" name="${field.name}" 
            value="${profile?.email}" class="${field.errorClass}" />
        #{/field}
    </p>
    
     <p>
        #{field 'gender'}
        <label>&{'gender'}:</label>
        <input type="text" name="${field.name}" 
            value="${profile?.gender}" class="${field.errorClass}" />
        #{/field}
    </p>
  	<p>
        #{field 'phonenumber'}
        <label>&{'phonenumber'}:</label>
        <input type="text" name="${field.name}" 
            value="${profile?.phonenumber}" class="${field.errorClass}" />
        #{/field}
    </p>
    <p>
        <input type="submit" value="Save Profile" />
    </p>
    
#{/form}
